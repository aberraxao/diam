{% extends 'votacao/index.html' %}

{% block title %}
    Detalhe da questao {{ questao.id }}
{% endblock %}

{% block content %}
    <form>
        {% csrf_token %}
        <h1>{{ questao.questao_texto }}</h1>
    
        {% if error_message %}
            <p><strong>{{ error_message }}</strong></p>
        {% endif %}
    
        {% for opcao in questao.opcao_set.all %}
            <input type="radio" name="opcao" id="opcao{{ forloop.counter }}" value="{{ opcao.id }}"/>
            <label for="opcao{{ forloop.counter }}">{{ opcao.opcao_texto }}</label>
            <br>
        {% endfor %}
        <br>
        <button type="submit" formmethod="post" formaction="{% url 'votacao:voto' questao.id %}">Voto
        </button>
        <button type="submit" formmethod="get" formaction="{% url 'votacao:index' %}">Voltar às questões</button>
        <br><br>
        <button type="submit" formmethod="get" name="_method" value="create_opcao"
                formaction="{% url 'votacao:detalhe' questao.id %}">Criar nova opção
        </button>
        <button type="submit" formmethod="post" name="_method" value="delete_opcao"
                formaction="{% url 'votacao:detalhe' questao.id %}">Apagar opção
        </button>
        <button type="submit" formmethod="post" name="_method" value="delete_questao"
                formaction="{% url 'votacao:detalhe' questao.id %}">Apagar questão
        </button>
    </form>
{% endblock %}
